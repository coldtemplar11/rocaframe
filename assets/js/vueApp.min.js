!function(){"use strict";var t=[,function(t,o,e){e.r(o),e.d(o,{mainComponent:function(){return a}});var s=e(2),n=e(4);const a={data:()=>({posts:[],nextTodoId:4,newTodo:"",todos:[{id:1,title:"Crear un framework cool"},{id:2,title:"Tomar cursos gratuitos de la Academia"},{id:3,title:"Suscribirse a nuestro Youtube"}]}),created(){this.fetchData()},methods:{fetchData:function(){var t=new XMLHttpRequest,o=this;t.open("get",Bee.url+"ajax/test_posts"),t.onload=function(){var e=JSON.parse(t.responseText);o.posts=e.data},t.send(),$.ajax({url:"ajax/test_posts",type:"get",dataType:"json",cache:!1,data:{},beforeSend(){$("#vueApp").waitMe()}}).done((t=>{})).fail((t=>{var o=t.responseJSON;toastr.error(o.msg,"¡Hubo un error!")})).always((()=>{$("#vueApp").waitMe("hide")}))},addNewTodo(){if(this.newTodo.length<5)return toastr.error("La tarea es demasiado corta."),!1;this.todos.push({id:this.nextTodoId++,title:this.newTodo}),toastr.success("Nueva tarea agregada con éxito."),this.newTodo=""}},computed:{notEmpty(){return this.newTodo.length>0}},components:{"todo-list":s.todoListComponent,"posts-list":n.postsListComponent},template:'\n  <div class="col-12 col-md-6 offset-md-3 mb-3">\n    <div class="card">\n      <div class="card-header">\n        <h4>Lista de tareas Vue.js 3</h4>\n      </div>\n      <div class="card-body">\n        <form v-on:submit.prevent="addNewTodo">\n          <div class="mb-2">\n            <label for="new-todo" class="form-label">Escribe una tarea...</label>\n            <input\n              v-model="newTodo"\n              placeholder="Alimentar al gato asesino..."\n              class="form-control"\n            />\n            <button class="btn btn-success mt-2" type="submit" :disabled="!notEmpty">Agregar tarea</button>\n          </div>\n        </form>\n        \n        <todo-list :todos="todos"></todo-list>\n      </div>\n    </div>\n  </div>\n\n  <div class="col-12 col-md-6 offset-md-3 mb-3">\n    <div class="card">\n      <div class="card-header">\n        <button class="btn btn-sm float-end" @click="fetchData"><i class="fas fa-sync fa-fw"></i></button>\n        <h4>Lista de posts</h4>\n      </div>\n      <div class="card-body">\n        <posts-list :posts="posts" @fetch-data="fetchData"></posts-list>\n      </div>\n    </div>\n  </div>\n  '}},function(t,o,e){e.r(o),e.d(o,{todoListComponent:function(){return s}});const s={data:()=>({}),methods:{removeTodo(t){this.todos.splice(t,1),toastr.success("Tarea borrada con éxito.")}},computed:{hasTodos(){return this.todos.length>0}},props:["todos"],emits:[],components:{"todo-item":e(3).todoItemComponent},template:'\n  <div v-if="hasTodos">\n    <ul class="list-group">\n      <todo-item\n        v-for="(todo, index) in todos"\n        :key="todo.id"\n        :todo="todo"\n        @remove="removeTodo(index)"\n      ></todo-item>\n    </ul>\n  </div>\n  <div class="py-5 text-center text-muted" v-else>\n    No hay tareas en la lista.\n  </div>\n  '}},function(t,o,e){e.r(o),e.d(o,{todoItemComponent:function(){return s}});const s={data:()=>({}),methods:{},computed:{},props:["todo"],emits:["remove"],template:'\n  <li class="list-group-item">\n    {{ todo.title }}\n    <button @click="$emit(\'remove\')" class="btn btn-sm btn-danger float-end"><i class="fas fa-trash"></i></button>\n  </li>\n  '}},function(t,o,e){e.r(o),e.d(o,{postsListComponent:function(){return s}});const s={data:()=>({postId:null,postTitle:String,postContent:String,post:{titulo:"",contenido:"",nombre:""},postEdit:{id:"",titulo:"",contenido:"",nombre:""},isEditing:!1}),methods:{addPost(){if(this.post.titulo.length<5)return void toastr.error("Completa el título del post.");if(this.post.nombre.length<5)return void toastr.error("Completa el nombre del Autor.");if(this.post.contenido.length<10)return void toastr.error("El contenido es demasiado corto.");const t={nombre:this.post.nombre,titulo:this.post.titulo,contenido:this.post.contenido,csrf:Bee.csrf};$.ajax({url:"ajax/test_add_post",type:"post",dataType:"json",cache:!1,data:t,beforeSend(){}}).done((t=>{201===t.status?(this.resetPost(),toastr.success(t.msg),this.$emit("fetch-data")):toastr.error(t.msg)})).fail((t=>{toastr.error(t.responseJSON.msg,"Hubo un error")})).always((()=>{}))},updatePost(){if(this.postEdit.titulo.length<5)return void toastr.error("Completa el título del post.");if(this.postEdit.nombre.length<5)return void toastr.error("Completa el nombre del Autor.");if(this.postEdit.contenido.length<10)return void toastr.error("El contenido es demasiado corto.");const t={id:this.postEdit.id,nombre:this.postEdit.nombre,titulo:this.postEdit.titulo,contenido:this.postEdit.contenido,csrf:Bee.csrf};$.ajax({url:"ajax/test_update_post",type:"put",dataType:"json",cache:!1,data:t,beforeSend(){}}).done((t=>{200===t.status?(this.isEditing=!1,this.resetPost(),toastr.success(t.msg),this.$emit("fetch-data")):toastr.error(t.msg)})).fail((t=>{toastr.error(t.responseJSON.msg,"Hubo un error")})).always((()=>{}))},removePost(t){this.postId=t,this.postId||toastr.error("El ID del post no es válido."),confirm("¿Estás seguro?")&&$.ajax({url:"api/posts/"+this.postId,type:"delete",dataType:"json",headers:{auth_private_key:"51362e-0cb1b9-f9c183-17b0a3-1a002e"},cache:!1,beforeSend(){}}).done((t=>{200===t.status?(toastr.success(t.msg),this.$emit("fetch-data")):toastr.error(t.msg)})).fail((t=>{toastr.error(t.responseJSON.msg,"Hubo un error")})).always((()=>{this.postId=null}))},openEdit(t){this.postEdit.id=t;const o={id:this.postEdit.id};$.ajax({url:"ajax/test_get_post",type:"get",dataType:"json",cache:!1,data:o,beforeSend(){}}).done((t=>{200===t.status?(this.postEdit.titulo=t.data.titulo,this.postEdit.nombre=t.data.nombre,this.postEdit.contenido=t.data.contenido,this.isEditing=!0):toastr.error(t.msg)})).fail((t=>{toastr.error(t.responseJSON.msg,"Hubo un error")})).always((()=>{}))},resetPost(){this.post={titulo:"",contenido:"",nombre:""},this.postEdit={titulo:"",contenido:"",nombre:""}},cancelUpdate(){this.resetPost(),this.isEditing=!1}},computed:{hasPosts(){return this.posts.length>0},canAdd(){return this.post.titulo.length>5&&this.post.contenido.length>10&&this.post.nombre.length>5},canUpdate(){return this.postEdit.titulo.length>5&&this.postEdit.contenido.length>10&&this.postEdit.nombre.length>5}},props:["posts"],emits:["fetch-data"],components:{},template:'\n  <form @submit.prevent="addPost" class="mb-3" v-if="!isEditing">\n    <div className="mb-3 row">\n      <div class="col-12 col-md-6">\n        <label htmlFor="titulo" className="form-label">Título del post</label>\n        <input type="text" className="form-control" v-model="post.titulo" placeholder="El título del post..."/>\n      </div>\n      <div class="col-12 col-md-6">\n        <label htmlFor="nombre" className="form-label">Nombre del autor</label>\n        <input type="text" className="form-control" v-model="post.nombre" placeholder="El nombre del Autor..."/>\n      </div>\n    </div>\n    <div className="mb-3">\n      <label htmlFor="contenido" className="form-label">Contenido</label>\n      <textarea class="form-control" name="contenido" id="contenido" cols="30" rows="10" v-model="post.contenido"></textarea>\n    </div>\n\n    <button className="btn btn-success" :disabled="!canAdd"><i className="fas fa-save fa-fw"></i> Guardar</button>\n  </form>\n\n  <form @submit.prevent="updatePost" class="mb-3" v-else>\n    <div className="mb-3 row">\n      <div class="col-12 col-md-6">\n        <label htmlFor="titulo" className="form-label">Título del post</label>\n        <input type="text" className="form-control" v-model="postEdit.titulo" placeholder="El título del post..."/>\n      </div>\n      <div class="col-12 col-md-6">\n        <label htmlFor="nombre" className="form-label">Nombre del autor</label>\n        <input type="text" className="form-control" v-model="postEdit.nombre" placeholder="El nombre del Autor..."/>\n      </div>\n    </div>\n    <div className="mb-3">\n      <label htmlFor="contenido" className="form-label">Contenido</label>\n      <textarea class="form-control" name="contenido" id="contenido" cols="30" rows="10" v-model="postEdit.contenido"></textarea>\n    </div>\n\n    <button className="btn btn-success me-1" :disabled="!canUpdate" type="submit"><i className="fas fa-save fa-fw"></i> Actualizar</button>\n    <button className="btn btn-warning" @click="cancelUpdate" type="button">Cancelar</button>\n  </form>\n\n  <div v-if="hasPosts">\n    <ul class="list-group">\n      <li class="list-group-item" v-for="(post, index) in posts" :key="post.id">\n        {{post.titulo}} <span className="text-muted">por</span> {{post.nombre}}\n        <div className="btn-group float-end">\n          <a :href="\'vuejs/test/\' + post.id" className="btn btn-sm btn-primary"><span className="fas fa-eye"></span></a>\n          <button @click="openEdit(post.id)" class="btn btn-sm btn-success" :disabled="post.id == postEdit.id"><i class="fas fa-edit"></i></button>\n          <button @click="removePost(post.id)" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>\n        </div>\n      </li>\n    </ul>\n  </div>\n  <div class="py-5 text-center text-muted" v-else>\n    No hay posts en la lista.\n  </div>\n  '}},function(t,o,e){e.r(o),e.d(o,{testComponent:function(){return s}});const s={data:()=>({postId:null,post:!1}),created(){this.get()},methods:{get(){this.postId=Bee.current_params[0];const t={id:this.postId};$.ajax({url:"ajax/test_get_post",type:"get",dataTpe:"json",cache:!1,data:t}).done((t=>{200===t.status?this.post=t.data:toastr.error(t.msg)})).fail((t=>{toastr.error(t.responseJSON.msg)})).always((()=>{}))}},template:'\n  <div className="p-5 bg-light border rounded shadow mt-5">\n    <div className="text-center">\n      <p>Componente <code>testComponent.js</code> cargado con éxito</p>\n      <a href="vuejs" className="text-muted">Regresar</a>\n    </div>\n\n    <div className="row mt-3" v-if="post">\n      <div className="col-12">\n        <div className="card">\n          <div className="card-header"><h4>{{post.titulo}}</h4></div>\n          <div className="card-body nl2br">\n            {{post.contenido}}\n          </div>\n          <div className="card-footer">\n            Por <span className="text-muted">{{post.nombre}}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  '}}],o={};function e(s){var n=o[s];if(void 0!==n)return n.exports;var a=o[s]={exports:{}};return t[s](a,a.exports,e),a.exports}e.d=function(t,o){for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};!function(){e.r(s);var t=e(1),o=e(5);Vue.createApp(t.mainComponent).mount("#mainApp"),Vue.createApp(o.testComponent).mount("#testApp")}()}();
//# sourceMappingURL=vueApp.min.js.map